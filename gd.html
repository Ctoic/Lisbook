<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" />
        <!-- Favicon -->
        <link rel="icon" href="Images/favicon.jpg" type="image/png" />
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />
        <script type="text/javascript" data-cmp-ab="1" src="https://cdn.consentmanager.net/delivery/autoblocking/1dae96c2c2031.js" data-cmp-host="a.delivery.consentmanager.net" data-cmp-cdn="cdn.consentmanager.net" data-cmp-codesrc="16"></script>
        <title>My Favorite Books Music App</title>
    </head>
    <body
        class="bg-gray-900 text-gray-300 d-flex flex-column min-h-screen"
    >
        <script>
            (function() {
                try {
                    const saved = localStorage.getItem('theme');
                    const theme = saved === 'light' ? 'light' : (saved === 'dark' ? 'dark' : null);
                    if (theme) {
                        document.documentElement.setAttribute('data-theme', theme);
                        document.body.classList.remove('light-theme', 'dark-theme');
                        document.body.classList.add(theme + '-theme');
                    }
                } catch (e) { console.warn('iframe theme init error', e); }
            })();
        </script>
        <main class="container flex-col  ">
            <div id="book-details">
            <!-- Book Card Display -->
                <section class="row flex-col md:flex-row align-items-stretch rounded-5 p-5">
                    <div class="col-12 col-lg-4 mb-5 mb-lg-0">
                        <div
                            class="features-card border rounded-5 p-4 text-center h-100"
                        >
                            <!-- Cover Image -->
                            <div
                                class="card-cover-container rounded-4 d-flex align-items-center border"
                                style="height: 16rem"
                            >
                                <img
                                    id="img"
                                    src="./Images/GD.jpeg"
                                    alt="God Delusion Cover"
                                    class="card-img-top img-fluid"
                                />
                            </div>
                            <!-- Book Details -->
                            <div class="mt-4" data-book="godDelusion">
                                <h1 class="text-2xl font-bold text-green-500" data-translate="title">
                                    God Delusion
                                </h1>
                                <h3 class="text-lg mt-2" data-translate="author">By Richard Dawkins</h3>
                                <p class="text-sm mt-2" data-translate="description">
                                    The God Delusion is a book by English biologist Richard Dawkins
                                    that argues against the existence of a supernatural creator.
                                </p>
                            </div>

                            <hr class="opacity-50 w-auto mt-4 mx-auo" />

                            <!-- Favorite, share, comment Buttons -->
                            <div
                                class="mt-3 flex justify-center icon-action-btn-container"
                            >
                                <i
                                    class="bi bi-heart mx-4 icon-action-btn tooltip-parent tooltip-bottom"
                                    id="favourite-btn"
                                    ><span class="tooltip" id="favourite"
                                        >Save to Favourites</span
                                    ></i
                                >
                                <i
                                    class="bi bi-share mx-4 icon-action-btn tooltip-parent tooltip-bottom"
                                    id="share-btn"
                                    data-bs-target="#exampleModalToggle"
                                    data-bs-toggle="modal"
                                    ><span class="tooltip" id="share"
                                        >Share</span
                                    ></i
                                >

                                <i
                                    class="bi bi-chat mx-4 icon-action-btn tooltip-parent tooltip-bottom"
                                    id="view-comments-btn"
                                    ><span class="tooltip" id="view"
                                        >View comments</span
                                    ></i
                                >
                            </div>
                        </div>
                    </div>
                    <!-- playlist -->
                    <div class="col-12 col-lg-8 ps-4" data-book="godDelusion">
                        <div
                            class="eatures-card border rounded-5 p-4 text-center h-100"
                        >
                            <ul
                                id="playlist"
                                class="playlist list-none text-left overflow-auto  m-2 mb-4"
                            >
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part1.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t0">Introduction: God Delusion</p>
                                        <a href="audio/part1.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part2.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t1">Track 02</p>
                                        <a href="audio/part2.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part3.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t2">Track 03</p>
                                        <a href="audio/part3.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part4.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t3">Track 04</p>
                                        <a href="audio/part4.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part5.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t4">Track 05</p>
                                        <a href="audio/part5.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part6.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t5">Track 06</p>
                                        <a href="audio/part6.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part7.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t6">Track 07</p>
                                        <a href="audio/part7.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part8.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t7">Track 08</p>
                                        <a href="audio/part8.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part9.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t8">Track 09</p>
                                        <a href="audio/part9.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part10.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t9">Track 10</p>
                                        <a href="audio/part10.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part11.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t10">Track 11</p>
                                        <a href="audio/part11.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part12.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t11">Track 12</p>
                                        <a href="audio/part12.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part13.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t12">Track 13</p>
                                        <a href="audio/part13.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                                <li
                                    class="adiobk-sub-item d-flex justify-content-between flex-column"
                                    data-src="audio/part14.mp3"
                                >
                                    <div class="d-flex justify-content-between">
                                        <p data-translate="t13">Track 14</p>
                                        <a href="audio/part14.mp3" download
                                            ><i
                                                class="bi bi-cloud-arrow-down-fill"
                                            ></i
                                        ></a>
                                    </div>
                                    <div
                                        class="bg-gray-700 flex-1 rounded-full ring-1"
                                    >
                                        <div
                                            class="progress-bar bg-red bg-white rounded-full"
                                        ></div>
                                    </div>
                                </li>
                            </ul>

                            <div class="player container rounded-5">
                                <audio
                                    id="audio-player"
                                    class="mt-4 mx-auto"
                                ></audio>
                                <span id="currentTime">0:00</span>
                                <input
                                    type="range"
                                    id="seekSlider"
                                    min="0"
                                    value="0"
                                />
                                <span id="duration">0:00</span>
                                <!-- Speed control -->
                                <div class="relative inline-block">
                                    <span id="speedButton" class="cursor-pointer text-green-300 font-semibold  rounded-lg py-1 px-3  hover:text-green-200 transition">1x</span>
                                    
                                    <!-- Dropdown Menu -->
                                    <ul id="speedDropdown" class="absolute hidden bg-gray-800 shadow-md rounded-xl mt-2 w-20">
                                        <li class="px-4 py-2 cursor-pointer hover:bg-gray-700 rounded-xl text-green-300" data-speed="0.5">0.5x</li>
                                        <li class="px-4 py-2 cursor-pointer hover:bg-gray-700 rounded-xl text-green-300" data-speed="1">1x</li>
                                        <li class="px-4 py-2 cursor-pointer hover:bg-gray-700 rounded-xl text-green-300" data-speed="1.5">1.5x</li>
                                        <li class="px-4 py-2 cursor-pointer hover:bg-gray-700 rounded-xl text-green-300" data-speed="2">2x</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Audio Players Controls Buttons -->
                            <div
                                class="ctrl-player mt-4 "
                                id="ctrl-player"
                            >
                                <div
                                    class="ctrl-buttons d-flex justify-content-evenly align-items-center"
                                >
                                    <div
                                        class="ctrl-button ctrl-button-small"
                                        id="volume-down"
                                    >
                                        <i class="bi bi-volume-down-fill"></i>
                                    </div>
                                    <div
                                        class="ctrl-button ctrl-button-medium"
                                        id="fast-backward"
                                    >
                                        <span>-30</span>
                                    </div>
                                    <div
                                        class="ctrl-button ctrl-button-large"
                                        id="ctrl-play"
                                    >
                                        <i class="bi bi-play-fill"></i>
                                    </div>
                                    <div
                                        class="ctrl-button ctrl-button-medium"
                                        id="fast-forward"
                                    >
                                        <span>+30</span>
                                    </div>
                                    <div
                                        class="ctrl-button ctrl-button-small"
                                        id="volume-up"
                                    >
                                        <i class="bi bi-volume-up-fill"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
    </div>
        <!-- Other content of gd.html ends here-->

        <!-- JavaScript -->
        <script src="./script.js"></script>
        <script src="./translation.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
        
        <!-- Show embed section in index.html -->
        <style>
            body.embedded #book-details {
              display: block;
            }
            body.embedded #other-sections {
              display: none;
            }
        </style>

        <!-- Ensure language sync in iframe -->
        <script>
            function changeLanguageLocally() {
                const language = document.getElementById('language').value;
                console.log('Local language change in gd.html:', language);
                applyTranslations(language);  // Directly apply translations within gd.html
            }

            function changeLanguage(language) {
                applyTranslations(language); // Call the translation function from translation.js
            }
    
            if (window.location !== window.parent.location) {
              document.body.classList.add('embedded');
            }
            
            // Listener for postMessage from index.html
            window.addEventListener('message', (event) => {
                try {
                    const data = event.data || {};
                    if (data.type === 'changeLanguage') {
                        const language = data.language;
                        console.log('Message received in gd.html, applying translations for language:', language);
                        applyTranslations(language);
                    }

                    // Sync theme from parent
                    if (data.type === 'theme' && (data.theme === 'light' || data.theme === 'dark')) {
                        document.documentElement.setAttribute('data-theme', data.theme);
                        document.body.classList.remove('light-theme', 'dark-theme');
                        document.body.classList.add(data.theme + '-theme');
                    }
                } catch (err) {
                    console.warn('postMessage handler error', err);
                }
            });

            document.addEventListener('DOMContentLoaded', function() {
                const defaultLanguage = 'en';
                applyTranslations(defaultLanguage);
            });
        </script>

    </body>
    
</html>


